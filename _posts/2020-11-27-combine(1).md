---
title: 개린이의 관점에서 Combine 살펴보기(1)
author: 1Consumption
date: 2020-10-27 21:00:00 +0800
categories: [iOS, Framework]
tags: [살펴보기, 둘러보기, 톺아보기, 주요 기능, Ccombine, 사용법, SwiftUI]
toc: true


---

> 이 글은 개린이의 지식을 바탕으로 작성된 글입니다. 최대한 옳은 정보를 담으려고 노력하겠으나, 그럼에도 틀린 부분이 있을 수 있습니다. 혹여 발견하시면 댓글로 피드백 주시면 감사하겠습니다.

# 머리말

안녕하세요 오랜만에 글을 쓰네요ㅎㅎ 진행하던 프로젝트를 마치고 앱스토어에 등록하고([여기ㅎ](https://apps.apple.com/kr/app/idillust/id1541265662)), 중간고사도 보고... 아무튼 바빴습니다ㅡㅡ 아무튼 바빴음. 

그래서~ 이제 뭘 공부해볼 것이냐? 바로 `Combine` 입니다ㅎㅎ. 뜬금없이 왜 Combine??? 사실 이번에 잠깐 다른 프로젝트에 참여하면서 `SwiftUI`를 사용해볼 경험이 있었습니다. `UIKit`과 비교해서 정말 좋았어요. preview로 UI의 변경사항을 바로바로 확인할 수 있다는 점과 가독성이 말도 안 되게 좋은 점이 매력적이었습니다. 그리고 모든 애플 기기에서 호환이 된다는 점도 매력적이었죠. 제 애플워치는 정말 시계 역할만 하고 있었거든요... 애플 워치에서도 돌아가는 나의 앱을 만들고 싶었습니다! 아무튼 그래서~ `SwiftUI`로 앱을 만들려 했는데, 비동기 통신이 필요한 앱이라 `Combine`을 공부해보려 합니다~

# 그래서 `Combine`이 뭔데?

Combine은 '결합하다' 라는 뜻이 있죠? 애플 개발자 문서를 보면 combine을 아래와 같이 한줄로 표현하고 있습니다.

> Customize handling of asynchronous events by combining event-processing operators.
>
> 이벤트 처리 연산자들을 결합하여 비동기 이벤트 처리를 커스터마이즈 함.

흠... 뭔가 operator들이 제공되고 그 operator들을 결합해서 내가 원하는대로 비동기 이벤트를 처리할 수 있나 봐요...? 그래서 Combine이군. 네 고생하셨습니다. 포스팅 끝... 이고 싶다.

`Combine`에는 `Publisher`와 `Subscriber` 프로토콜이 있습니다. 간단히 말하자면 `Publisher`는 시간의 흐름에 따라 value의 sequence를 제공하는 것을 말합니다. 그리고 upstream publisher로 부터 받은 value에 대해 행동을 취하고, 다시 publish 하는 `operator`를 가집니다.

그리고 이 `Publisher`의 chain 끝에서 `Subscriber`는  `Publisher`로부터 element를 받습니다. `Publisher`는 `Subscriber`가 요청한 경우에만 값을 내보내는데, 이를 통해 `Subscriber`가 연결된 `Publisher`로 부터 이벤트를 수신하는 속도를 제어할 수 있다고 하네요. 좀 더 자세한 것은 다음 포스팅에서 다루도록 하겠습니다.

`Timer`, `NotificationCenter`, `URLSession`를 비롯한 여러 `Foundation` 타입은 `Publisher`를 통해 기능할 수 있습니다. 또한 Key-Value Observing을 따르는 프로퍼티에 대한 빌트인  `Publisher`를 제공한다네요...

그리고! `Publisher`들의 결과를 결합(combine)하고 그것들을 조정할 수 있다고하네여. 무슨 소리일까ㅎㅎ 애플에서 친절하게 예시를 하나 들어줬습니다. text field의 `publisher`의  변경사항을 구독(subscribe)하고, 이 text로 URL request를 수행할 수 있습니다. 그리고 다른 `publisher`를 사용해 응답을 처리하고 처리한 응답을 사용해 앱을 업데이트 할 수 있대요! 아 어렵네ㅎ

마지막으로 ~ `Combine`을 사용하면 이벤트 처리 코드를 중앙 집중화하고, 콜백 지옥에서 벗어날 수 있어서 코드의 가독성을 높이고 유지보수가 쉽다고 합니다.

------------------------------------------

# 결론

음... 오늘은 본격적으로 들어가기 전에 OverView를 알아봤는데요... 아직 써보지 않아서 잘 이해가 가지 않는 부분이 있긴 합니다만... 두루뭉술하게 어떤 느낌인지는 알 거 같아요. 핵심은 "`Combine`은 기존 애플 프레임워크와 결합해 비동기 처리에 특화된 프레임워크이며, `Publisher`와 `Subscriber`라는 것을 이용하면 비동기 로직을 한곳에 모을 수 있고, 코드가 간결해지고 유지보수가 쉬워진다" 라고 생각이 드네요ㅎㅎ

다음 시간에는  `Publisher`와 `Subscriber`에 대해 조금 더 자세히 알아보고 사용 예시들 들어보도록 하겠습니다~

# 출처

* [Apple Developer Documentation](https://developer.apple.com/documentation/combine)